{"ast":null,"code":"import { createStore } from 'vuex';\nimport axios from 'axios';\nconst store = createStore({\n  state: {\n    authToken: localStorage.getItem('authToken') || null,\n    cartItems: []\n  },\n  mutations: {\n    setAuthToken(state, token) {\n      state.authToken = token;\n    },\n    clearAuthToken(state) {\n      state.authToken = null;\n    },\n    setCart(state, cartItems) {\n      state.cartItems = cartItems;\n    },\n    updateCartItems(state, updatedItems) {\n      state.cartItems = updatedItems;\n    }\n  },\n  actions: {\n    fetchCart({\n      commit,\n      state\n    }) {\n      const token = state.authToken;\n      axios.get('http://127.0.0.1:5002/get-cart', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        commit('setCart', response.data.cart_items);\n      }).catch(error => {\n        console.error('Error fetching cart items:', error);\n      });\n    },\n    login({\n      commit\n    }, token) {\n      commit('setAuthToken', token);\n      // Save the token to localStorage\n      localStorage.setItem('authToken', token);\n    },\n    logout({\n      commit\n    }) {\n      commit('clearAuthToken');\n      // Remove the token from localStorage\n      localStorage.removeItem('authToken');\n    },\n    updateCart({\n      commit,\n      state\n    }, updatedItems) {\n      const token = state.authToken;\n      console.log('Updated Cart Items:', updatedItems);\n\n      // Make an API call to update the cart on the server\n      axios.put('http://127.0.0.1:5002/update-cart', {\n        cart_items: updatedItems\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        console.log('Cart updated successfully:', response.data);\n        commit('updateCartItems', updatedItems);\n      }).catch(error => {\n        console.error('Error updating cart:', error);\n      });\n    }\n  }\n});\nexport default store;","map":{"version":3,"names":["createStore","axios","store","state","authToken","localStorage","getItem","cartItems","mutations","setAuthToken","token","clearAuthToken","setCart","updateCartItems","updatedItems","actions","fetchCart","commit","get","headers","Authorization","then","response","data","cart_items","catch","error","console","login","setItem","logout","removeItem","updateCart","log","put"],"sources":["C:/Users/menzm/Desktop/SCC_Project/frontend/src/store/store.js"],"sourcesContent":["import { createStore } from 'vuex';\r\nimport axios from 'axios';\r\n\r\nconst store = createStore({\r\n  state: {\r\n    authToken: localStorage.getItem('authToken') || null,\r\n    cartItems: [],\r\n  },\r\n  mutations: {\r\n    setAuthToken(state, token) {\r\n      state.authToken = token;\r\n    },\r\n    clearAuthToken(state) {\r\n      state.authToken = null;\r\n    },\r\n    setCart(state, cartItems) {\r\n      state.cartItems = cartItems;\r\n    },\r\n    updateCartItems(state, updatedItems) {\r\n      state.cartItems = updatedItems;\r\n    },\r\n  },\r\n  actions: {\r\n    fetchCart({ commit, state }) {\r\n      const token = state.authToken;\r\n\r\n      axios.get('http://127.0.0.1:5002/get-cart', { headers: { Authorization: `Bearer ${token}` } })\r\n        .then(response => {\r\n          commit('setCart', response.data.cart_items);\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching cart items:', error);\r\n        });\r\n    },\r\n    login({ commit }, token) {\r\n      commit('setAuthToken', token);\r\n      // Save the token to localStorage\r\n      localStorage.setItem('authToken', token);\r\n    },\r\n    logout({ commit }) {\r\n      commit('clearAuthToken');\r\n      // Remove the token from localStorage\r\n      localStorage.removeItem('authToken');\r\n    },\r\n    updateCart({ commit, state }, updatedItems) {\r\n      const token = state.authToken;\r\n      console.log('Updated Cart Items:', updatedItems);\r\n\r\n      // Make an API call to update the cart on the server\r\n      axios.put('http://127.0.0.1:5002/update-cart', { cart_items: updatedItems }, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      })\r\n        .then(response => {\r\n          console.log('Cart updated successfully:', response.data);\r\n          commit('updateCartItems', updatedItems);\r\n        })\r\n        .catch(error => {\r\n          console.error('Error updating cart:', error);\r\n        });\r\n    },\r\n  },\r\n});\r\n\r\nexport default store;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,KAAK,GAAGF,WAAW,CAAC;EACxBG,KAAK,EAAE;IACLC,SAAS,EAAEC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI;IACpDC,SAAS,EAAE;EACb,CAAC;EACDC,SAAS,EAAE;IACTC,YAAYA,CAACN,KAAK,EAAEO,KAAK,EAAE;MACzBP,KAAK,CAACC,SAAS,GAAGM,KAAK;IACzB,CAAC;IACDC,cAAcA,CAACR,KAAK,EAAE;MACpBA,KAAK,CAACC,SAAS,GAAG,IAAI;IACxB,CAAC;IACDQ,OAAOA,CAACT,KAAK,EAAEI,SAAS,EAAE;MACxBJ,KAAK,CAACI,SAAS,GAAGA,SAAS;IAC7B,CAAC;IACDM,eAAeA,CAACV,KAAK,EAAEW,YAAY,EAAE;MACnCX,KAAK,CAACI,SAAS,GAAGO,YAAY;IAChC;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,SAASA,CAAC;MAAEC,MAAM;MAAEd;IAAM,CAAC,EAAE;MAC3B,MAAMO,KAAK,GAAGP,KAAK,CAACC,SAAS;MAE7BH,KAAK,CAACiB,GAAG,CAAC,gCAAgC,EAAE;QAAEC,OAAO,EAAE;UAAEC,aAAa,EAAG,UAASV,KAAM;QAAE;MAAE,CAAC,CAAC,CAC3FW,IAAI,CAACC,QAAQ,IAAI;QAChBL,MAAM,CAAC,SAAS,EAAEK,QAAQ,CAACC,IAAI,CAACC,UAAU,CAAC;MAC7C,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MACpD,CAAC,CAAC;IACN,CAAC;IACDE,KAAKA,CAAC;MAAEX;IAAO,CAAC,EAAEP,KAAK,EAAE;MACvBO,MAAM,CAAC,cAAc,EAAEP,KAAK,CAAC;MAC7B;MACAL,YAAY,CAACwB,OAAO,CAAC,WAAW,EAAEnB,KAAK,CAAC;IAC1C,CAAC;IACDoB,MAAMA,CAAC;MAAEb;IAAO,CAAC,EAAE;MACjBA,MAAM,CAAC,gBAAgB,CAAC;MACxB;MACAZ,YAAY,CAAC0B,UAAU,CAAC,WAAW,CAAC;IACtC,CAAC;IACDC,UAAUA,CAAC;MAAEf,MAAM;MAAEd;IAAM,CAAC,EAAEW,YAAY,EAAE;MAC1C,MAAMJ,KAAK,GAAGP,KAAK,CAACC,SAAS;MAC7BuB,OAAO,CAACM,GAAG,CAAC,qBAAqB,EAAEnB,YAAY,CAAC;;MAEhD;MACAb,KAAK,CAACiC,GAAG,CAAC,mCAAmC,EAAE;QAAEV,UAAU,EAAEV;MAAa,CAAC,EAAE;QAC3EK,OAAO,EAAE;UAAEC,aAAa,EAAG,UAASV,KAAM;QAAE;MAC9C,CAAC,CAAC,CACCW,IAAI,CAACC,QAAQ,IAAI;QAChBK,OAAO,CAACM,GAAG,CAAC,4BAA4B,EAAEX,QAAQ,CAACC,IAAI,CAAC;QACxDN,MAAM,CAAC,iBAAiB,EAAEH,YAAY,CAAC;MACzC,CAAC,CAAC,CACDW,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C,CAAC,CAAC;IACN;EACF;AACF,CAAC,CAAC;AAEF,eAAexB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}