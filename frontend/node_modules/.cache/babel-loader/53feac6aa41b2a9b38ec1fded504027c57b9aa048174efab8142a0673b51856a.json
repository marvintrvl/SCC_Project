{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"max-w-md mx-auto mt-8\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-3xl font-bold mb-4\"\n}, \"Checkout\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"mb-4\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-2xl font-bold mb-2\"\n}, \"Order Details\", -1 /* HOISTED */);\nconst _hoisted_5 = {\n  class: \"border-collapse border border-gray-800 w-full\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", {\n  class: \"bg-gray-800 text-white\"\n}, [/*#__PURE__*/_createElementVNode(\"th\", {\n  class: \"py-2 px-4\"\n}, \"Photo\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  class: \"py-2 px-4\"\n}, \"Size\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  class: \"py-2 px-4\"\n}, \"Quantity\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  class: \"py-2 px-4\"\n}, \"Subtotal\")])], -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"py-2 px-4\"\n};\nconst _hoisted_8 = {\n  class: \"py-2 px-4\"\n};\nconst _hoisted_9 = {\n  class: \"py-2 px-4\"\n};\nconst _hoisted_10 = {\n  class: \"py-2 px-4\"\n};\nconst _hoisted_11 = {\n  class: \"text-xl font-bold mb-2\"\n};\nconst _hoisted_12 = {\n  class: \"mb-4\"\n};\nconst _hoisted_13 = {\n  class: \"border border-gray-800 p-4\"\n};\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-2xl font-bold mb-2\"\n}, \"Shipping Information\", -1 /* HOISTED */);\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"font-bold\"\n}, \"Street:\", -1 /* HOISTED */);\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"font-bold\"\n}, \"Postal Code:\", -1 /* HOISTED */);\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"font-bold\"\n}, \"City:\", -1 /* HOISTED */);\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"font-bold\"\n}, \"Country:\", -1 /* HOISTED */);\nconst _hoisted_19 = {\n  class: \"mb-4\"\n};\nconst _hoisted_20 = {\n  class: \"border border-gray-800 p-4\"\n};\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-2xl font-bold mb-2\"\n}, \"Bank Information\", -1 /* HOISTED */);\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"bankInfo\",\n  class: \"block text-white mb-2\"\n}, \"Enter Bank Information:\", -1 /* HOISTED */);\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\"\n}, \"Place Order\", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"table\", _hoisted_5, [_hoisted_6, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.cartItems, item => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.id\n    }, [_createElementVNode(\"td\", _hoisted_7, _toDisplayString(item.photo.name), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, _toDisplayString(item.photo.size), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_9, _toDisplayString(item.quantity), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, \"$\" + _toDisplayString(item.photo.price * item.quantity), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createElementVNode(\"p\", _hoisted_11, \"Total: $\" + _toDisplayString($data.cartTotal), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _createCommentVNode(\" Display user's shipping information \"), _createElementVNode(\"p\", null, [_hoisted_15, _createTextVNode(\" \" + _toDisplayString($data.user.street), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_hoisted_16, _createTextVNode(\" \" + _toDisplayString($data.user.postal_code), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_hoisted_17, _createTextVNode(\" \" + _toDisplayString($data.user.city), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_hoisted_18, _createTextVNode(\" \" + _toDisplayString($data.user.country), 1 /* TEXT */)])])]), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_hoisted_21, _createCommentVNode(\" Allow the user to enter bank information \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.placeOrder && $options.placeOrder(...args), [\"prevent\"]))\n  }, [_hoisted_22, _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.bankInfo = $event),\n    name: \"bankInfo\",\n    class: \"rounded-md px-4 py-2 w-full bg-gray-800 text-white resize-none\",\n    maxlength: \"30\",\n    rows: \"1\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.bankInfo]]), _hoisted_23], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","$data","cartItems","item","key","id","_hoisted_7","_toDisplayString","photo","name","_hoisted_8","size","_hoisted_9","quantity","_hoisted_10","price","_hoisted_11","cartTotal","_hoisted_12","_hoisted_13","_hoisted_14","_createCommentVNode","_hoisted_15","user","street","_hoisted_16","postal_code","_hoisted_17","city","_hoisted_18","country","_hoisted_19","_hoisted_20","_hoisted_21","onSubmit","_cache","_withModifiers","args","$options","placeOrder","_hoisted_22","bankInfo","$event","maxlength","rows","required","_hoisted_23"],"sources":["C:\\Users\\menzm\\Desktop\\SCC_Project\\frontend\\src\\views\\CheckoutView.vue"],"sourcesContent":["<template>\r\n  <div class=\"max-w-md mx-auto mt-8\">\r\n    <h1 class=\"text-3xl font-bold mb-4\">Checkout</h1>\r\n\r\n    <div class=\"mb-4\">\r\n      <h2 class=\"text-2xl font-bold mb-2\">Order Details</h2>\r\n      <table class=\"border-collapse border border-gray-800 w-full\">\r\n        <thead>\r\n          <tr class=\"bg-gray-800 text-white\">\r\n            <th class=\"py-2 px-4\">Photo</th>\r\n            <th class=\"py-2 px-4\">Size</th>\r\n            <th class=\"py-2 px-4\">Quantity</th>\r\n            <th class=\"py-2 px-4\">Subtotal</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in cartItems\" :key=\"item.id\">\r\n            <td class=\"py-2 px-4\">{{ item.photo.name }}</td>\r\n            <td class=\"py-2 px-4\">{{ item.photo.size }}</td>\r\n            <td class=\"py-2 px-4\">{{ item.quantity }}</td>\r\n            <td class=\"py-2 px-4\">${{ item.photo.price * item.quantity }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <p class=\"text-xl font-bold mb-2\">Total: ${{ cartTotal }}</p>\r\n\r\n    <div class=\"mb-4\">\r\n      <div class=\"border border-gray-800 p-4\">\r\n        <h2 class=\"text-2xl font-bold mb-2\">Shipping Information</h2>\r\n        <!-- Display user's shipping information -->\r\n        <p><span class=\"font-bold\">Street:</span> {{ user.street }}</p>\r\n        <p><span class=\"font-bold\">Postal Code:</span> {{ user.postal_code }}</p>\r\n        <p><span class=\"font-bold\">City:</span> {{ user.city }}</p>\r\n        <p><span class=\"font-bold\">Country:</span> {{ user.country }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mb-4\">\r\n      <div class=\"border border-gray-800 p-4\">\r\n        <h2 class=\"text-2xl font-bold mb-2\">Bank Information</h2>\r\n        <!-- Allow the user to enter bank information -->\r\n        <form @submit.prevent=\"placeOrder\">\r\n          <label for=\"bankInfo\" class=\"block text-white mb-2\">Enter Bank Information:</label>\r\n          <textarea v-model=\"bankInfo\" name=\"bankInfo\" class=\"rounded-md px-4 py-2 w-full bg-gray-800 text-white resize-none\" maxlength=\"30\" rows=\"1\" required></textarea>\r\n          <button type=\"submit\" class=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\">Place Order</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      cartItems: [],\r\n      cartTotal: 0,\r\n      user: {},\r\n      bankInfo: '',\r\n    };\r\n  },\r\n  methods: {\r\n    fetchCartItems() {\r\n      axios.get('http://127.0.0.1:5002/get-cart', {\r\n        headers: {\r\n          Authorization: `Bearer ${this.$store.state.authToken}`,\r\n        },\r\n      })\r\n        .then(response => {\r\n          this.cartItems = response.data.cart_items;\r\n          this.cartTotal = response.data.total_price;\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching cart items:', error);\r\n        });\r\n    },\r\n    fetchUserInfo() {\r\n      axios.get('http://127.0.0.1:5000/profile', {\r\n        headers: {\r\n          Authorization: `Bearer ${this.$store.state.authToken}`,\r\n        },\r\n      })\r\n        .then(response => {\r\n          this.user = response.data;\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching user information:', error);\r\n        });\r\n    },\r\n    placeOrder() {\r\n      const orderDetails = this.cartItems.map(item => {\r\n    if (item.photo) {\r\n        return {\r\n            quantity: item.quantity,\r\n            size: item.photo.size,\r\n            photo_name: item.photo.name,\r\n            photo_id: item.photo.id,\r\n            subtotal: item.photo.price * item.quantity,\r\n        };\r\n    } else {\r\n        // Handle the case where item.photo is undefined\r\n        console.error('Item photo is undefined:', item);\r\n        return null;  // or handle it in a way that suits your application\r\n    }\r\n});\r\n\r\n      const orderData = {\r\n        total_price: this.cartTotal,\r\n        shipping_address: `${this.user.street}, ${this.user.postal_code}, ${this.user.city}, ${this.user.country}`,\r\n        bank_info: this.bankInfo,\r\n        order_details: orderDetails,\r\n      };\r\n\r\n      axios.post('http://127.0.0.1:5004/place-order', orderData, {\r\n        headers: {\r\n          Authorization: `Bearer ${this.$store.state.authToken}`,\r\n        },\r\n      })\r\n        .then(response => {\r\n          console.log('Order placed successfully:', response.data);\r\n          // Optionally, you can handle success and navigate to a thank you page\r\n        })\r\n        .catch(error => {\r\n          console.error('Error placing order:', error);\r\n          // Handle error, show a message to the user, etc.\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchCartItems();\r\n    this.fetchUserInfo();\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAuB;gCAChCC,mBAAA,CAAiD;EAA7CD,KAAK,EAAC;AAAyB,GAAC,UAAQ;;EAEvCA,KAAK,EAAC;AAAM;gCACfC,mBAAA,CAAsD;EAAlDD,KAAK,EAAC;AAAyB,GAAC,eAAa;;EAC1CA,KAAK,EAAC;AAA+C;gCAC1DC,mBAAA,CAOQ,gB,aANNA,mBAAA,CAKK;EALDD,KAAK,EAAC;AAAwB,I,aAChCC,mBAAA,CAAgC;EAA5BD,KAAK,EAAC;AAAW,GAAC,OAAK,G,aAC3BC,mBAAA,CAA+B;EAA3BD,KAAK,EAAC;AAAW,GAAC,MAAI,G,aAC1BC,mBAAA,CAAmC;EAA/BD,KAAK,EAAC;AAAW,GAAC,UAAQ,G,aAC9BC,mBAAA,CAAmC;EAA/BD,KAAK,EAAC;AAAW,GAAC,UAAQ,E;;EAK1BA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAW;;EAM1BA,KAAK,EAAC;AAAwB;;EAE5BA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAA4B;iCACrCC,mBAAA,CAA6D;EAAzDD,KAAK,EAAC;AAAyB,GAAC,sBAAoB;iCAErDC,mBAAA,CAAsC;EAAhCD,KAAK,EAAC;AAAW,GAAC,SAAO;iCAC/BC,mBAAA,CAA2C;EAArCD,KAAK,EAAC;AAAW,GAAC,cAAY;iCACpCC,mBAAA,CAAoC;EAA9BD,KAAK,EAAC;AAAW,GAAC,OAAK;iCAC7BC,mBAAA,CAAuC;EAAjCD,KAAK,EAAC;AAAW,GAAC,UAAQ;;EAIlCA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAA4B;iCACrCC,mBAAA,CAAyD;EAArDD,KAAK,EAAC;AAAyB,GAAC,kBAAgB;iCAGlDC,mBAAA,CAAmF;EAA5EC,GAAG,EAAC,UAAU;EAACF,KAAK,EAAC;GAAwB,yBAAuB;iCAE3EC,mBAAA,CAAyH;EAAjHE,IAAI,EAAC,QAAQ;EAACH,KAAK,EAAC;GAAyE,aAAW;;uBA7CxHI,mBAAA,CAiDM,OAjDNC,UAiDM,GAhDJC,UAAiD,EAEjDL,mBAAA,CAoBM,OApBNM,UAoBM,GAnBJC,UAAsD,EACtDP,mBAAA,CAiBQ,SAjBRQ,UAiBQ,GAhBNC,UAOQ,EACRT,mBAAA,CAOQ,iB,kBANNG,mBAAA,CAKKO,SAAA,QAAAC,WAAA,CALcC,KAAA,CAAAC,SAAS,EAAjBC,IAAI;yBAAfX,mBAAA,CAKK;MAL0BY,GAAG,EAAED,IAAI,CAACE;QACvChB,mBAAA,CAAgD,MAAhDiB,UAAgD,EAAAC,gBAAA,CAAvBJ,IAAI,CAACK,KAAK,CAACC,IAAI,kBACxCpB,mBAAA,CAAgD,MAAhDqB,UAAgD,EAAAH,gBAAA,CAAvBJ,IAAI,CAACK,KAAK,CAACG,IAAI,kBACxCtB,mBAAA,CAA8C,MAA9CuB,UAA8C,EAAAL,gBAAA,CAArBJ,IAAI,CAACU,QAAQ,kBACtCxB,mBAAA,CAAkE,MAAlEyB,WAAkE,EAA5C,GAAC,GAAAP,gBAAA,CAAGJ,IAAI,CAACK,KAAK,CAACO,KAAK,GAAGZ,IAAI,CAACU,QAAQ,iB;wCAMlExB,mBAAA,CAA6D,KAA7D2B,WAA6D,EAA3B,UAAQ,GAAAT,gBAAA,CAAGN,KAAA,CAAAgB,SAAS,kBAEtD5B,mBAAA,CASM,OATN6B,WASM,GARJ7B,mBAAA,CAOM,OAPN8B,WAOM,GANJC,WAA6D,EAC7DC,mBAAA,yCAA4C,EAC5ChC,mBAAA,CAA+D,YAA5DiC,WAAsC,E,iBAAA,GAAC,GAAAf,gBAAA,CAAGN,KAAA,CAAAsB,IAAI,CAACC,MAAM,iB,GACxDnC,mBAAA,CAAyE,YAAtEoC,WAA2C,E,iBAAA,GAAC,GAAAlB,gBAAA,CAAGN,KAAA,CAAAsB,IAAI,CAACG,WAAW,iB,GAClErC,mBAAA,CAA2D,YAAxDsC,WAAoC,E,iBAAA,GAAC,GAAApB,gBAAA,CAAGN,KAAA,CAAAsB,IAAI,CAACK,IAAI,iB,GACpDvC,mBAAA,CAAiE,YAA9DwC,WAAuC,E,iBAAA,GAAC,GAAAtB,gBAAA,CAAGN,KAAA,CAAAsB,IAAI,CAACO,OAAO,iB,OAI9DzC,mBAAA,CAUM,OAVN0C,WAUM,GATJ1C,mBAAA,CAQM,OARN2C,WAQM,GAPJC,WAAyD,EACzDZ,mBAAA,8CAAiD,EACjDhC,mBAAA,CAIO;IAJA6C,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;MAC/BG,WAAmF,E,gBACnFnD,mBAAA,CAAgK;+DAA7IY,KAAA,CAAAwC,QAAQ,GAAAC,MAAA;IAAEjC,IAAI,EAAC,UAAU;IAACrB,KAAK,EAAC,gEAAgE;IAACuD,SAAS,EAAC,IAAI;IAACC,IAAI,EAAC,GAAG;IAACC,QAAQ,EAAR;iDAAzH5C,KAAA,CAAAwC,QAAQ,E,GAC3BK,WAAyH,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}